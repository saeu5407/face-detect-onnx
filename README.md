# 레포 목적
모바일 환경에서 얼굴 인식 모델을 실행하기 위해서는 간단하게는 mediapipe와 같은 툴의 도움을 받는 방법이 있고
조금 더 작업을 한다면 오픈소스 모델 등을 onnx로 컨버팅하여 사용하는 방법이 있음.<br>
<br>
문제는 mediapipe의 경우 메모리 누수 문제가 많이 발생하고 있어 해결이 어려우며, 특히 다른 패키지 등으로 특정 버전이 강제되는 경우 사용하기 어려울 수 있음<br>
이럴 경우 오픈 소스 모델을 컨버팅하여 사용하는 것이 더 편함<br>
<br>
오픈소스 얼굴 인식 모델의 성능은 좋은 편이지만, 모델의 특성 상 추론 결과가 하나의 깔끔한 바운딩 박스가 아니라 여러 박스들을 추론하게 되어있으며, 이를 nms 등으로 후처리해야함<br>
파이썬에서는 이미 구현된 코드도 많고 구현하기가 어렵지는 않지만 모바일 프레임워크에서 구현하기에는 어려움이 있을 수 있음<br>
<br>
여러 오닉스 컨버팅 모델을 찾아보고, 적절한 몇 가지 모델을 정리함.



# 후처리가 필요 없는 모델
- blazeface
- `weights/mpipe_bface_boxes_ops16.onnx`
- [원본 링크](https://github.com/manthi4/End-to-end-BlazeFace-Onnx)

nms 및 앵커 박스 예측 코드를 모델에 적용한 코드로, 추론만 실행하면 바운딩 박스 및 일부 랜드마크까지 측정됨.<br>
리사이즈 할 때 사이즈만 잘 처리하면 된다.<br>
일반인이 공개한 모델이라 모델에 문제가 있을 수 있음(블라즈페이스를 그대로 가져오긴 함)<br>
demo.py로 실행가능함

# 후처리가 필요한 모델
- retinaface
- `weights/RetinaFace_int.onnx`
- [원본 링크](https://huggingface.co/amd/retinaface/tree/main)

nms, priorbox 등 후처리 구문에 대한 컨버팅이 필요함(리엑트네이티브 등 모바일 환경에 맞는 코드 기준)<br>
amd에서 공개한 버전이라 모델 자체에는 문제 없을 것으로 기대함<br>
/old에 정리함.

